{% load static %}
{% block content %}
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %} {% endblock %}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'css/gestionCursos.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
</head>
<body>
    <div class="welcome-navegation">
    <div>
        <p class="bienvenida">Bienvenido</p>
    </div>
    <div class="navigation">
        <a href="{% url 'index' %}">Inicio</a>
        <a href="{% url 'blog' %}">Blog</a>
        <a href="{% url 'about' %}">Acerca de la empresa</a>
        <a href="{% url 'contact' %}">Contacto</a>
    </div>      
</div>
<div class="empresa-info">
    <div class="mission-container">
        <img class="img-inicio" src="{% static 'img/intercion.jpg' %}" alt="Imagen">
        <div>
            <head>
                <title>Mision</title>
                <style>
                    .cuadro{
                        width: 320px;
                        height: 600px;
                        border: 1px solid #000;
                        padding: 10px;
                        background-color:beige;
                    }
                    .titulo{
                        font-weight: bold;
                        font-size: 18px;
                        text-align: center;
                        margin-bottom: 10px;
                        color: black;
                    }
                    .contenido{
                        color: black;
                    }
                </style>
            </head>
            <body>
                <div class="cuadro">
                    <h2 class="titulo">Mision</h2>
                    <p class="contenido">1. Mision siman: promover un entorno inclusivo
                        donde todos los empleados sean tratados con respeto y equidad independientement
                        de su discapacidad.
                    </p>
                    <p class="contenido">2. Metrocentro: promover la igualdad en las contrataciones de 
                        empledos, adaptando los entornos de trabajo para asegurarse que
                        sean accesibles y adecuados para todos los empleados independientemente
                        de su discapacidad.
                    </p>
                    <p class="contenido">3. Diparvel: promover la inclusion proporcionando
                        ajustes razonables para la participacion de las personas con discapacidad
                        ofreciendoles capacitaciones.
                    </p>
                    <p class="contenido">4. Texaco: nuestra mision es fomentar la inclusion y
                        promover la igualdad de oportunidades en el ambito laboral, brindando
                        apoyo y oportunidades a las personas con discapacidad.
                    </p>
                </div>
            </body>
        </div>
    </div>
    <!-- Resto del contenido -->
    <div class="mission-container">
        <div>
            <h2>Estadisticas</h2>
            <div class="container py-4">
                <div class="row">
                    <div class="col-sm-12 col-md-6 col-lg-4 col-xl-4">
                        {% if messages %}
                        {% for message in messages %}
                        <div class="alert alert-dismissible alert-success">
                            <button type="button" class="close" data-dismiss="alert">&times;</button>
                            <strong class="text-dark">{{ message }}</strong>
                        </div>
                        {% endfor %}
                        {% endif %}
                        <h2>Gestión de Estadísticas</h2>
                        <div class="card">
                            <div class="card-body">
                                <form action="/registrar_estadistica/" method="POST">{% csrf_token %}
                                    <div class="form-group">
                                        <input type="text" id="txtNombre" name="txtNombre" class="form-control"
                                            placeholder="Nombre" maxlength="100" required>
                                    </div>
                                    <div class="form-group">
                                        <input type="text" id="txtApellido" name="txtApellido" class="form-control"
                                            placeholder="Apellido" maxlength="100" required>
                                    </div>
                                    <div class="form-group">
                                        <input type="number" id="txtEdad" name="txtEdad" class="form-control" min="1" max="150"
                                            placeholder="Edad" required>
                                    </div>
                                    <div class="form-group">
                                        <input type="text" id="txtGenero" name="txtGenero" class="form-control"
                                            placeholder="Género" maxlength="50" required>
                                    </div>
                                    <div class="form-group">
                                        <input type="text" id="txtTipoDiscapacidad" name="txtTipoDiscapacidad" class="form-control"
                                            placeholder="Tipo de Discapacidad" maxlength="100" required>
                                    </div>
                                    <div class="form-group">
                                        <input type="text" id="txtSector" name="txtSector" class="form-control" placeholder="Sector"
                                            maxlength="100" required>
                                    </div>
                                    <div class="form-group">
                                        <input type="text" id="txtActividadEconomica" name="txtActividadEconomica" class="form-control"
                                            placeholder="Actividad Económica" maxlength="100" required>
                                    </div>
                                    <div class="form-group">
                                        <input type="text" id="txtCategoriaOcupacion" name="txtCategoriaOcupacion" class="form-control"
                                            placeholder="Categoría de Ocupación" maxlength="100" required>
                                    </div>
                                    <div class="form-group">
                                        <button type="submit" class="btn btn-success btn-block text-white">Guardar</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-12 col-md-6 col-lg-8 col-xl-8">
                        <h1>Listado de Estadísticas</h1>
                        <div class="table-responsive py-2">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>Nombre</th>
                                        <th>Apellido</th>
                                        <th>Edad</th>
                                        <th>Género</th>
                                        <th>Tipo de Discapacidad</th>
                                        <th>Sector</th>
                                        <th>Actividad Económica</th>
                                        <th>Categoría de Ocupación</th>
                                        <th colspan="2">Opciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for estadistica in estadisticas %}
                                    <tr>
                                        <td>{{ estadistica.nombre }}</td>
                                        <td>{{ estadistica.apellido }}</td>
                                        <td>{{ estadistica.edad }}</td>
                                        <td>{{ estadistica.genero }}</td>
                                        <td>{{ estadistica.tipodiscapacidad }}</td>
                                        <td>{{ estadistica.sector }}</td>
                                        <td>{{ estadistica.actividadeconomica }}</td>
                                        <td>{{ estadistica.categoriaocupacion }}</td>
                                        <td><a href="/edicion_estadistica/{{ estadistica.nombre }}" class="btn btn-info">Editar</a></td>
                                        <td><a href="/eliminar_estadistica/{{ estadistica.nombre }}" class="btn btn-danger btnEliminacion">Eliminar</a></td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>            
        </div>    
      <div>
        <h2>Contenido de grafica</h2>
        <script>
            const tableEstadisticas = document.getElementById('estadisticas')
            const nivelEstadisticasRows = [...tableEstadisticas.querySelectorAll('.nivel-estadistica')]
            const coloresDeNiveles = {
                amarilla: 'text-warning',
                roja: 'text-danger',
                verde: 'text-success',
            }
            nivelEstadisticasRows.forEach((estadistica) => {
                const nivelDeEstadistica = estadistica.dataset.nivel
                estadistica.classList.add(coloresDeNiveles[nivelDeEstadistica])
            })

            const ctxPieEstadisticas = document.getElementById('chartPieEstadisticas')
            const ctxPieEstadisticas = document.getElementById('chartBarEstadisticas')

            const dataPieEstadisticas = [
                tableEstadisticas.querySelectorAll('.text-danger').length,
                tableEstadisticas.querySelectorAll('.text-success').length,
                tableEstadisticas.querySelectorAll('.text-warning').length,
            ]

            const dataBarTipoDeDiscapacidad = {
                'Dicapacidad física': 0,
                'Dicapacidad visual': 0,
                'Dicapacidad auditiva': 0,
                'Discapacidad del habla y del lenguaje': 0,
                'Dicapacidad intelectual': 0,
                'Dicapacidad del desarrollo': 0,
                'Dicapacidad psicosocial': 0,
                'Dicapacidad invisible': 0,
            }

            new Chart(ctxPieEstadisticas, {

                type: 'pie',
                data: {
                    labels: ['Dicapacidad física', 'Dicapacidad visual', 'Dicapacidad auditiva', 'Discapacidad del habla y del lenguaje', 'Dicapacidad intelectual', 'Dicapacidad del desarrollo', 'Dicapacidad psicosocial', 'Dicapacidad invisible'],
                    datasets: [{
                        label: 'Cantidad de Personas Discapacitadas'
                        data: dataPieEstadisticas,                        
                    }]
                }
            })
        </script>
        <!-- Resto del contenido de graficas-->
      </div>
    </div>        
</div>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"
        integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s"
        crossorigin="anonymous"></script>
    <script src="{% static 'js/gestionCursos.js' %}"></script>
</body>
</html>
{% endblock %}